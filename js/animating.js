var PageTransitions=function(a,t){"use strict";var i=a(".animated-sections"),n=!1,e=!0,o=!1,s=(a(window),{WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"}[Modernizr.prefixed("animation")]),c=Modernizr.cssanimations;function r(t){if(!t)return!1;var i=a(t);i=i[0],(i=a(i))&&(a("ul.main-menu a").removeClass("active"),i.addClass("active"))}function l(){var t=a("#page-ajax-loaded");function i(){t.removeClass("animated-section-moveToRight closed"),t.show(),a("body").addClass("ajax-page-visible")}var n=a(".ajax-page-load").each((function(){if(n=a(this).attr("href"),location.hash==location.hash.split("/")[0]+"/"+n.substr(0,n.length-5)){var e=a(this).attr("href");return i(),t.load(e),!1}}));a(document).on("click",".main-menu, #ajax-page-close-button",(function(i){i.preventDefault(),a("#page-ajax-loaded").addClass("animated-section-moveToRight closed"),a("body").removeClass("ajax-page-visible"),setTimeout((function(){a("#page-ajax-loaded.closed").html(""),t.hide()}),500),location.hash=location.hash.split("/")[0]})).on("click",".ajax-page-load",(function(){var t=location.hash.split("/")[0]+"/"+a(this).attr("href").substr(0,a(this).attr("href").length-5);return location.hash=t,i(),!1}))}function d(t,r){if(!t.attr("data-animation")){var l=parseInt(Math.floor(3*Math.random())+1);t.data("animation",l)}var d,m,f,u=t.data("animation").toString();if(-1!=u.indexOf("-")){var v=u.split("-");f=parseInt(v[Math.floor(Math.random()*v.length)])}else f=parseInt(u);if(f>67)return alert("Transition.js : Invalid 'data-animation' attribute configuration. Animation number should not be greater than 67"),!1;switch(f){case 1:d="animated-section-moveFromLeft animated-section-ontop",m="animated-section-scaleDown";break;case 2:d="animated-section-moveFromBottom animated-section-ontop",m="animated-section-scaleDown";break;case 3:d="animated-section-rotateSlideIn",m="animated-section-rotateSlideOut"}var p,g=i,b=g.data("current");r=t.attr("href").split("#")[1],p=b;var x=a('section[data-id="'+b+'"]');if(p!=(b=r)){n=!0,g.data("current",b);var k=a("section[data-id="+b+"]").addClass("section-active");k.scrollTop(0),x.addClass(m).on(s,(function(){x.off(s),e=!0,o&&(h(g,k,x),e=!1)})),k.addClass(d).on(s,(function(){k.off(s),o=!0,e&&(h(g,k,x),o=!1,n=!1)}))}else n=!1;c||h(x,k)}function h(a,t,i){!function(a,t){t.attr("class",t.data("originalClassList")),a.attr("class",a.data("originalClassList")+" section-active")}(t,i)}return{init:function(t){a(".animated-section").each((function(){var t=a(this);t.data("originalClassList",t.attr("class"))})),i.each((function(){""===location.hash&&a("section[data-id="+o+"]").addClass("section-active")})),a(".nav-anim").on("click",(function(t){if(t.preventDefault(),n)return!1;var i=a(this);r(i),d(i),location.hash=a(this).attr("href")})),window.onhashchange=function(t){if(location.hash){if(n)return!1;var i=a(e+' a[href*="'+location.hash.split("/")[0]+'"]');r(i),d(i),l()}};var e=t.menu,o=""===location.hash?location.hash=a("section.animated-section").first().attr("data-id"):location.hash;location.hash=o;var s=a(e+' a[href*="'+location.hash.split("/")[0]+'"]');r(s),d(s),a("body").append('<div id="page-ajax-loaded" class="page-ajax-loaded animated animated-section-moveFromLeft"></div>'),l(),a(".lmpixels-arrow-right").click((function(){var t=a(".main-menu a.active").parent("li");t.next("li").children("a").click(),t.is(":last-child")&&a(".main-menu li:first-child").children("a").click()})),a(".lmpixels-arrow-left").click((function(){var t=a(".main-menu a.active").parent("li");t.prev("li").children("a").click(),t.is(":first-child")&&a(".main-menu li:last-child").children("a").click()}))}}}(jQuery);